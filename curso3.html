<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><title>Compartilhe - Mapas Mentais</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>body{font-family:Arial,sans-serif;margin:20px}input,textarea{width:100%;margin:5px 0;padding:8px;border-radius:8px;border:1px solid #ddd}button{margin:5px;padding:10px 20px;border-radius:10px;cursor:pointer}#filesList div{border:1px solid #ccc;padding:10px;margin:5px 0;border-radius:10px}</style></head><body><h1>Compartilhe Mapas Mentais</h1><p>Envie imagens (.jpg) ou PDFs com descrição. Todos podem visualizar ou baixar.</p><input type="file" id="fileInput" accept=".jpg,.pdf"><textarea id="descInput" placeholder="Descrição do arquivo"></textarea><button id="uploadBtn">Enviar</button><h2>Arquivos compartilhados:</h2><div id="filesList"></div><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script><script>const supabaseUrl="https://geusvnckvfdtrsqtweuv.supabase.co";const supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdldXN2bmNrdmZkdHJzcXR3ZXV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyODI1MzYsImV4cCI6MjA3Mjg1ODUzNn0.IqPy2wti3ECgBf-0qepjn6Ct9w4o4QbdWYZ8VLmqxaw";const supabase=supabase.createClient(supabaseUrl,supabaseKey);const bucket="shared";const filesList=document.getElementById("filesList");async function refreshFiles(){const {data}=await supabase.storage.from(bucket).list("",{limit:100,offset:0});filesList.innerHTML="";for(const f of data){const url= supabase.storage.from(bucket).getPublicUrl(f.name).publicUrl;const div=document.createElement("div");div.innerHTML=`<a href="${url}" target="_blank">${f.name}</a><br>`;const meta=(await supabase.storage.from(bucket).getMetadata(f.name)).data;div.innerHTML+=meta?.description?`<small>${meta.description}</small>`:"";filesList.appendChild(div);}}document.getElementById("uploadBtn").onclick=async()=>{const file=document.getElementById("fileInput").files[0];const desc=document.getElementById("descInput").value||"";if(!file){alert("Selecione um arquivo.");return;}const {data,error}=await supabase.storage.from(bucket).upload(file.name,file,{upsert:true,metadata:{description:desc}});if(error){alert("Erro: "+error.message);return;}alert("Enviado!");document.getElementById("fileInput").value="";document.getElementById("descInput").value="";refreshFiles();};refreshFiles();</script></body></html>
