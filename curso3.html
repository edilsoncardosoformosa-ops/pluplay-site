<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Compartilhamento de Mapas</title><style>:root{--p:#1E90FF;--bg:#f4f4f9;--fg:#333;--card-bg:#fff;--card-shadow:0 6px 18px rgba(0,0,0,.06)}body{margin:0;font-family:Arial,sans-serif;background:var(--bg);color:var(--fg)}header{background:var(--p);color:#fff;padding:20px;text-align:center}main{padding:20px;max-width:1000px;margin:auto}.card{background:var(--card-bg);border-radius:10px;padding:16px;box-shadow:var(--card-shadow);margin-bottom:16px}input,button{padding:10px;border-radius:6px;border:1px solid #ddd}button{background:var(--p);color:#fff;border:none;cursor:pointer;font-weight:bold}button.ghost{background:#eee;color:#222}.cards-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:16px}.map-card{background:var(--card-bg);border-radius:10px;padding:12px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;align-items:center;text-align:center}.map-card h4{margin:8px 0;font-size:1rem}.map-card a{margin-top:8px;text-decoration:none;color:#fff;background:var(--p);padding:8px 12px;border-radius:6px;display:inline-block}</style></head><body><header><h1>Compartilhe Mapas Mentais</h1><p>Envie e baixe mapas em PDF ou imagens</p></header><main><div class="card"><h3>Enviar Mapa</h3><input type="text" id="mapName" placeholder="Nome do Mapa"><br><br><input type="file" id="mapFile" accept=".pdf,.jpeg,.jpg"><br><br><button id="uploadBtn">Enviar</button></div><div class="card"><h3>Mapas Disponíveis</h3><div class="cards-container" id="mapsList"></div></div><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script><script>const SUPABASE_URL="https://nqhthypeljupfftlmwsz.supabase.co",SUPABASE_KEY="sb_publishable_Nzfhcwd_mFYlzJro3318-g_aX6vGjD1",supabase=supabase.createClient(SUPABASE_URL,SUPABASE_KEY);async function loadMaps(){const{data,error}=await supabase.from("mapas").select("*");if(error)return console.error(error);const container=document.getElementById("mapsList");container.innerHTML="";data.forEach(m=>{const div=document.createElement("div");div.className="map-card";const title=document.createElement("h4");title.textContent=m.nome;const a=document.createElement("a");a.href=m.file_url;a.textContent="Baixar";a.target="_blank";div.appendChild(title);div.appendChild(a);container.appendChild(div)})}document.getElementById("uploadBtn").addEventListener("click",async()=>{const name=document.getElementById("mapName").value.trim(),file=document.getElementById("mapFile").files[0];if(!name||!file)return alert("Preencha nome e selecione arquivo");const ext=file.name.split(".").pop().toLowerCase();if(!["pdf","jpeg","jpg"].includes(ext))return alert("Formato inválido");const filePath=`${Date.now()}_${file.name}`,{data,error}=await supabase.storage.from("mapas").upload(filePath,file);if(error)return console.error(error),void alert("Erro no upload");const publicURL=supabase.storage.from("mapas").getPublicUrl(filePath).data.publicUrl;await supabase.from("mapas").insert([{nome:name,file_url:publicURL}]),alert("Mapa enviado!"),document.getElementById("mapName").value="",document.getElementById("mapFile").value="",loadMaps()}),loadMaps();</script></main></body></html>