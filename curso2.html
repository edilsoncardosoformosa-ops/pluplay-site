<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><title>Treinamento Protegido Curso 2</title><meta name="viewport" content="width=device-width,initial-scale=1.0"><style>body{font-family:Arial,sans-serif;text-align:center;margin:20px;font-size:1em}button{margin:5px;padding:10px 20px;font-size:1em;border-radius:10px;cursor:pointer}#quiz,#result,#addQuestionForm,#addQuestionBlockForm,#protectedContent,#userInfo,#manageUsers{display:none}#comment{font-size:1.2em;color:#333;margin-top:20px}textarea{width:90%;height:60px;margin:5px 0}</style></head><body><div id="protectedContent"><h1>Treinamento Professor Tempor√°rio SEDF - P√≥s Edital</h1><button id="toggleVoice">üîä Ativar Ler</button><div id="menu"><h2>Escolha o T√≥pico</h2><label for="numQuestions">Quantas Quest√µes?</label><br><input type="number" id="numQuestions" min="1" max="50" value="10" style="font-size:1.5em;padding:5px;width:80px;text-align:center"><br><br><button onclick="startQuiz('Curso2Topico1')">T√≥pico 1</button><button onclick="startQuiz('Curso2Topico2')">T√≥pico 2</button><button onclick="startQuiz('Curso2Topico3')">T√≥pico 3</button><br><br><div id="adminButtons" style="margin-top:10px;"><button onclick="showAddQuestion()">‚ûï Adicionar Quest√£o</button><button onclick="showAddBlock()">‚ûï Adicionar Bloco</button><button onclick="showManageUsers()">üë§ Gerenciar Usu√°rios</button></div><div id="userInfo" style="margin-top:15px;"><p>ID do seu dispositivo: <span id="userId"></span></p><button id="copyIdBtn">üìã Copiar ID</button><p>Para liberar acesso completo, envie este ID via WhatsApp:</p><a href="https://wa.me/5561999251102" target="_blank">Contato Master +55(61)99925-1102</a></div></div><div id="quiz"><p id="counter"></p><p id="question"></p><button onclick="answer(true)">Certo</button><button onclick="answer(false)">Errado</button><div id="comment"></div><button onclick="nextQuestion()">Pr√≥xima quest√£o</button><button onclick="backToMenu()">Voltar ao Menu</button></div><div id="result"><h2>Fim do Quiz!</h2><p id="score"></p><button onclick="restartQuiz()">Reiniciar</button></div><div id="addQuestionForm"><h3>Adicionar Nova Quest√£o</h3><label>T√≥pico:</label><select id="newTopic"><option value="Curso2Topico1">T√≥pico 1</option><option value="Curso2Topico2">T√≥pico 2</option><option value="Curso2Topico3">T√≥pico 3</option></select><br><label>Pergunta:</label><br><textarea id="newQuestionText"></textarea><br><label>Correta?</label><select id="newQuestionAnswer"><option value="true">Certo</option><option value="false">Errado</option></select><br><label>Coment√°rio:</label><br><textarea id="newQuestionComment"></textarea><br><button onclick="addQuestion()">Adicionar</button><button onclick="hideAddQuestion()">Cancelar</button></div><div id="addQuestionBlockForm"><h3>Adicionar Bloco de Quest√µes</h3><label>T√≥pico:</label><select id="newBlockTopic"><option value="Curso2Topico1">T√≥pico 1</option><option value="Curso2Topico2">T√≥pico 2</option><option value="Curso2Topico3">T√≥pico 3</option></select><br><label>Quest√µes (uma por linha, formato JS, v√≠rgula opcional no final):</label><br><textarea id="newBlockQuestions" placeholder="{q:'Pergunta1',a:true,c:'Coment√°rio1'},"></textarea><br><button onclick="addQuestionBlock()">Adicionar Bloco</button><button onclick="hideAddBlock()">Cancelar</button></div><div id="manageUsers"><h3>Gerenciar Usu√°rios</h3><ul id="userList"></ul><h4>Adicionar Usu√°rio Manualmente</h4><input type="text" id="manualUserId" placeholder="Cole ou gere ID aqui"><button onclick="addManualUser()">Adicionar Usu√°rio</button><button onclick="hideManageUsers()">Fechar</button></div><script src="controle.js"></script><script>window.addEventListener("DOMContentLoaded",async function(){const MASTER_HASH="50d14563b2f686e9f88f93f7ff37f1a048bb49e2746b1c90502f83510c7e1b6c";function sha256(e){const t=new TextEncoder;return crypto.subtle.digest("SHA-256",t.encode(e)).then(t=>Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join(""))}let senha=prompt("Digite a senha para acessar o quiz:"),isMaster=false;if(senha){const hash=await sha256(senha);isMaster=hash===MASTER_HASH}if(!senha)alert("Acesso limitado. Voc√™ poder√° responder apenas 5 quest√µes de cada t√≥pico.");document.getElementById("protectedContent").style.display="block";let userId=localStorage.getItem("userId");if(!userId){userId=crypto.randomUUID();localStorage.setItem("userId",userId)}let allowedUsers=JSON.parse(localStorage.getItem("allowedUsers")||"[]");if(!isMaster){document.getElementById("adminButtons").style.display="none";document.getElementById("userInfo").style.display="block";document.getElementById("userId").textContent=userId;document.getElementById("copyIdBtn").addEventListener("click",()=>navigator.clipboard.writeText(userId).then(()=>alert("ID copiado!")));if(allowedUsers.includes(userId))document.getElementById("userInfo").innerHTML=`Acesso liberado! <br>Contato Master: <a href="https://wa.me/5561999251102" target="_blank">+55(61)99925-1102</a>`}function saveAllowed(){localStorage.setItem("allowedUsers",JSON.stringify(allowedUsers))}let currentQuestions=[],currentIndex=0,score=0,voiceEnabled=false;function shuffleArray(e){let t=e.slice();for(let i=t.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[t[i],t[j]]=[t[j],t[i]]}return t}window.startQuiz=function(e){let t=questions[e];if(!isMaster&&!allowedUsers.includes(userId))t=t.slice(0,5);currentQuestions=shuffleArray(t);currentIndex=0;score=0;document.getElementById("menu").style.display="none";document.getElementById("quiz").style.display="block";showQuestion()};function showQuestion(){if(currentIndex<currentQuestions.length){const e=currentQuestions[currentIndex];document.getElementById("question").textContent=e.q;document.getElementById("comment").textContent="";document.getElementById("counter").textContent="Quest√£o "+(currentIndex+1)+" de "+currentQuestions.length;if(voiceEnabled)speak(e.q)}else endQuiz()}window.answer=function(e){const t=currentQuestions[currentIndex],aText=(e===t.a?"‚úî Correto! ":"‚úñ Errado! ")+t.c;document.getElementById("comment").textContent=aText;if(e===t.a)score++;if(voiceEnabled)speak(aText)};window.nextQuestion=function(){currentIndex++;showQuestion()};window.backToMenu=function(){document.getElementById("quiz").style.display="none";document.getElementById("result").style.display="none";document.getElementById("menu").style.display="block";currentQuestions=[];currentIndex=0;score=0};window.endQuiz=function(){document.getElementById("quiz").style.display="none";document.getElementById("result").style.display="block";document.getElementById("score").textContent="Voc√™ acertou "+score+" de "+currentQuestions.length+" quest√µes."};window.restartQuiz=function(){document.getElementById("result").style.display="none";document.getElementById("menu").style.display="block"};document.getElementById("toggleVoice").addEventListener("click",()=>{voiceEnabled=!voiceEnabled;document.getElementById("toggleVoice").textContent=voiceEnabled?"üîâ Desativar Ler":"üîä Ativar Ler"});function speak(e){if(voiceEnabled){window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e);t.lang="pt-BR";t.rate=1.5;window.speechSynthesis.speak(t)}}window.showAddQuestion=function(){document.getElementById("addQuestionForm").style.display="block"};window.hideAddQuestion=function(){document.getElementById("addQuestionForm").style.display="none"};window.addQuestion=function(){const e=document.getElementById("newTopic").value,t=document.getElementById("newQuestionText").value.trim(),n=document.getElementById("newQuestionAnswer").value==="true",a=document.getElementById("newQuestionComment").value.trim();if(!t||!a){alert("Preencha pergunta e coment√°rio!");return}questions[e].push({q:t,a:n,c:a});localStorage.setItem("questions",JSON.stringify(questions));alert("Quest√£o adicionada em "+e+"!");hideAddQuestion()};window.showAddBlock=function(){document.getElementById("addQuestionBlockForm").style.display="block"};window.hideAddBlock=function(){document.getElementById("addQuestionBlockForm").style.display="none"};window.addQuestionBlock=function(){const e=document.getElementById("newBlockTopic").value,t=document.getElementById("newBlockQuestions").value.trim();if(!t){alert("Digite ao menos uma quest√£o!");return}const n=t.split("\n").map(e=>e.trim()).filter(Boolean);let a=0,r=0;n.forEach(t=>{try{if(t.endsWith(","))t=t.slice(0,-1);const n=Function('"use strict"; return ('+t+")")();if(!n.q||typeof n.a!=="boolean"||!n.c)throw"Formato inv√°lido";questions[e].push(n);a++}catch(e){r++}});localStorage.setItem("questions",JSON.stringify(questions));alert(`Bloco adicionado em ${e}!\nAdicionadas: ${a}\nFalharam: ${r}`);hideAddBlock()};window.showManageUsers=function(){document.getElementById("manageUsers").style.display="block";const e=document.getElementById("userList");e.innerHTML="";allowedUsers.forEach(t=>{const n=document.createElement("li");n.textContent=t+" ";const a=document.createElement("button");a.textContent="Revogar";a.onclick=()=>{allowedUsers=allowedUsers.filter(e=>e!==t);saveAllowed();showManageUsers()};n.appendChild(a);e.appendChild(n)})};window.hideManageUsers=function(){document.getElementById("manageUsers").style.display="none"};window.addManualUser=function(){let e=document.getElementById("manualUserId").value.trim();if(!e)e=crypto.randomUUID();if(!allowedUsers.includes(e)){allowedUsers.push(e);saveAllowed();alert("Usu√°rio adicionado com sucesso!\nID: "+e);document.getElementById("manualUserId").value="";showManageUsers()}else alert("Usu√°rio j√° liberado")}});</script></body></html>