<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Master Admin</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { color: #1E90FF; }
    .card { background: #fff; border-radius: 10px; padding: 16px; box-shadow: 0 6px 18px rgba(0,0,0,.06); margin-bottom: 16px; }
    label { font-weight: bold; display:block; margin-top: 10px; }
    textarea, select, input { width: 100%; padding: 8px; margin-top: 4px; }
    button { padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; background: #1E90FF; color: #fff; margin-top: 10px; }
    button.ghost { background: #ccc; color: #000; }
    #questionsList div { margin: 6px 0; padding: 6px; border-bottom: 1px solid #ddd; }
  </style>
</head>
<body>
  <h1>Master Admin</h1>

  <div class="card">
    <h3>Adicionar Questão</h3>
    <label>Tópico</label>
    <select id="newTopic">
      <option value="Lport">Língua Portuguesa</option>
      <option value="ride">RIDE</option>
      <option value="Legisla">Legislação</option>
      <option value="TemaEdu">Temas Educacionais</option>
      <option value="Eduincl">Educação Inclusiva</option>
    </select>

    <label>Pergunta</label>
    <textarea id="newQuestionText"></textarea>

    <label>Comentário</label>
    <textarea id="newQuestionComment"></textarea>

    <label>Resposta Correta</label>
    <select id="newQuestionAnswer">
      <option value="true">Certo</option>
      <option value="false">Errado</option>
    </select>

    <button id="saveQuestionBtn">Salvar Questão</button>
  </div>

  <div class="card">
    <h3>Gerenciar Questões</h3>
    <div id="questionsList"></div>
    <button onclick="exportQuizData()">Salvar no Servidor</button>
  </div>

<script src="controle.js"></script>
<script>
  // Renderiza lista
  function renderQuestionsList() {
    let container = document.getElementById("questionsList");
    container.innerHTML = "";
    Object.keys(quizData).forEach(topic => {
      quizData[topic].forEach((qObj, i) => {
        let div = document.createElement("div");
        div.textContent = `[${topic}] ${qObj.q} (${qObj.a ? "Certo" : "Errado"})`;
        container.appendChild(div);
      });
    });
  }
  renderQuestionsList();

  // Adicionar questão
  document.getElementById("saveQuestionBtn").addEventListener("click", () => {
    let t = document.getElementById("newTopic").value,
        q = document.getElementById("newQuestionText").value,
        c = document.getElementById("newQuestionComment").value,
        a = document.getElementById("newQuestionAnswer").value === "true";
    if (!q) { alert("Digite a pergunta"); return; }
    if (!quizData[t]) quizData[t] = [];
    quizData[t].push({q:q,a:a,c:c});
    renderQuestionsList();
    alert("Questão adicionada (ainda não enviada ao servidor).");
  });

  // Exportar para servidor (via save.php)
  function exportQuizData() {
    fetch("save.php", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(quizData)
    })
    .then(r => r.text())
    .then(msg => alert(msg))
    .catch(err => alert("Erro: " + err));
  }
</script>
</body>
</html>