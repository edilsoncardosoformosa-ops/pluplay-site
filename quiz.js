var quizData=loadQuizData()||{},userId=localStorage.getItem("userId");if(!userId){userId=crypto.randomUUID();localStorage.setItem("userId",userId)};var currentQuestions=[],currentIndex=0,score=0,voiceEnabled=!1;function startQuiz(topic){var all=quizData[topic]||[];if(!all.length){alert("Sem questões neste tópico.");return}currentQuestions=all.slice(),currentIndex=0,score=0,document.getElementById("menu").style.display="none",document.getElementById("quiz").classList.remove("hidden"),showQuestion()}function showQuestion(){if(currentIndex>=currentQuestions.length){endQuiz();return}var q=currentQuestions[currentIndex];document.getElementById("question").textContent=q.q,document.getElementById("comment").textContent="",document.getElementById("counter").textContent="Questão "+(currentIndex+1)+" de "+currentQuestions.length,voiceEnabled&&(window.speechSynthesis.cancel(),window.speechSynthesis.speak(new SpeechSynthesisUtterance(q.q)))}function answer(c){var q=currentQuestions[currentIndex],txt=(c===q.a?"✓ Correto! ":"✗ Errado! ")+(q.c||"");document.getElementById("comment").textContent=txt,c===q.a&&(score++),voiceEnabled&&(window.speechSynthesis.cancel(),window.speechSynthesis.speak(new SpeechSynthesisUtterance(txt)))}function nextQuestion(){currentIndex++,showQuestion()}function prevQuestion(){currentIndex>0&&(currentIndex--,showQuestion())}function backToMenu(){document.getElementById("quiz").classList.add("hidden"),document.getElementById("menu").style.display="block"}function endQuiz(){document.getElementById("quiz").classList.add("hidden"),document.getElementById("result").classList.remove("hidden"),document.getElementById("score").textContent="Você acertou "+score+" de "+currentQuestions.length}function restartQuiz(){document.getElementById("result").classList.add("hidden"),document.getElementById("menu").style.display="block"}function toggleVoice(){voiceEnabled=!voiceEnabled;alert(voiceEnabled?"Leitura ativada":"Leitura desativada")}