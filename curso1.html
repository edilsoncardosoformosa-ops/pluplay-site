<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Curso 1</title>
<style>
:root{--p:#1E90FF;--s:#FFA500;--bg:#f4f4f9;--fg:#333}
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:var(--bg);color:var(--fg)}
header{background:var(--p);color:#fff;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
header img{height:44px}
main{padding:20px}
.card{background:#fff;border-radius:10px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);margin-bottom:16px}
button{cursor:pointer;border:0;border-radius:8px;padding:8px 12px;background:var(--p);color:#fff}
button.ghost{background:#eee;color:#222}
.grid{display:grid;gap:12px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input,textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
label{font-weight:600}
.muted{color:#666;font-size:.95rem}
.hidden{display:none!important}
</style>
</head>
<body>
<header>
  <img src="logomarca.png" alt="Logo Curso 1">
  <span class="muted">Curso 1</span>
</header>

<main>
<div class="card">
  <h3 id="question">Carregando...</h3>
  <p id="comment"></p>
  <div class="row">
    <button id="prevBtn">Anterior</button>
    <button id="nextBtn">PrÃ³xima</button>
  </div>
  <p id="counter" class="muted"></p>
</div>
<div class="card">
  <button id="voiceBtn">ðŸ”Š Ouvir QuestÃ£o</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
document.addEventListener('DOMContentLoaded', async ()=>{
  try {
    const SUPABASE_URL = 'https://nqhthypeljupfftlmwsz.supabase.co';
    const SUPABASE_KEY = 'sua_chave_publica';
    const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    let quizCurrent=[], currentIndex=0, voiceEnabled=true;

    // Carregar questÃµes do bloco Lport (exemplo)
    const { data, error } = await supabase.from('questoes').select().eq('bloco_id','Lport');
    if(error){ alert('Erro ao carregar questÃµes'); console.warn(error); return; }
    quizCurrent = data;

    const questionEl = document.getElementById('question');
    const commentEl = document.getElementById('comment');
    const counterEl = document.getElementById('counter');

    function showQuestion(){
      if(currentIndex >= quizCurrent.length){ questionEl.innerText='Fim do Quiz'; commentEl.innerText=''; counterEl.innerText=''; return; }
      const q = quizCurrent[currentIndex];
      questionEl.innerText = q.enunciado;
      commentEl.innerText = '';
      counterEl.innerText = `QuestÃ£o ${currentIndex+1} de ${quizCurrent.length}`;
    }

    document.getElementById('nextBtn').addEventListener('click', ()=>{ currentIndex++; showQuestion(); });
    document.getElementById('prevBtn').addEventListener('click', ()=>{ if(currentIndex>0) currentIndex--; showQuestion(); });

    document.getElementById('voiceBtn').addEventListener('click', ()=>{
      if(!voiceEnabled || !quizCurrent[currentIndex]) return;
      const utter = new SpeechSynthesisUtterance(quizCurrent[currentIndex].enunciado);
      utter.rate = 1.2;
      speechSynthesis.speak(utter);
    });

    showQuestion();

  } catch(e){ console.error('Erro ao iniciar Curso 1', e); alert('Erro ao iniciar curso.'); }
});
</script>
</main>
</body>
</html>